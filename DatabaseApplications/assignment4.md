# Zadanie 1

## Brudne dane
```sql
CREATE TABLE Test(id int, some_text varchar(200))

INSERT INTO Test(id, some_text) VALUES (1, '!!!! SUPER IMPORTANT TEXT !!!!')

-- SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
BEGIN TRAN
SELECT * FROM Test WHERE id = 1
WAITFOR DELAY '00:00:05'
SELECT * FROM Test WHERE id = 1
ROLLBACK

BEGIN TRAN
UPDATE Test SET some_text = '[REDACTED]' WHERE id = 1
COMMIT
```

> READ_UNCOMITTED

## Niepowtarzalnosć odczytów

```sql
TRUNCATE Test
INSERT Test VALUES(1,'aaa' )
INSERT Test VALUES(2,'bbb' )
INSERT Test VALUES(3,'ccc' )
INSERT Test VALUES(4,'ddd' )
INSERT Test VALUES(5,'eee' )
```

```sql
SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
BEGIN TRANSACTION;
SELECT TOP 3 * FROM Test ORDER BY some_text
WAITFOR DELAY '00:00:05'
SELECT TOP 3 * FROM Test ORDER BY some_text
ROLLBACK
```

```sql
BEGIN TRAN
UPDATE Test SET some_text='xxx' WHERE id = 3;
COMMIT
```

> READ_UNCOMITTED, READ_COMMITED, READ_COMMITED_SNAPSHOT

## Odczyty fantomowe

```sql
INSERT Test VALUES (2, 'Wpis 2')
INSERT Test VALUES (3, 'Wpis 3')
INSERT Test VALUES (5, 'Wpis 5')

-- SET TRANSACTION ISOLATION LEVEL REPEATABLE READ
BEGIN TRANS
SELECT * FROM Test WHERE id > 2 and id < 5
WAITFOR DELAY '00:00:05'
SELECT * FROM Test WHERE id > 2 and id < 5
ROLLBACK

BEGIN TRANS
INSERT Test Values (4, 'Wpis 4')
COMMIT
```

> READ_UNCOMITTED, READ_COMMITED, READ_COMMITED_SNAPSHOT, REPETABLE_READ

# Zadanie 2

```sql
ALTER DATABASE tempdb
    SET READ_COMMITTED_SNAPSHOT OFF -- {OFF | ON}
    WITH ROLLBACK IMMEDIATE;
GO

UPDATE Test SET some_text = 'Super important text' WHERE id = 1

SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
BEGIN TRAN
UPDATE Test SET some_text = '[REDACTED]' WHERE id = 1
WAITFOR DELAY '00:00:05'
COMMIT

BEGIN TRAN
SELECT * FROM Test WHERE id = 1
ROLLBACK
```
